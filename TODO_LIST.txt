Add documentation and comments.

Make this run on GNU/Linux.
